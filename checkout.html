<script>
  const cart = JSON.parse(localStorage.getItem('cart') || '[]');
  const orderDisplay = document.getElementById("orderDisplay");
  const orderText = document.getElementById("orderText");

  let html = "";
  let text = "";

  if (cart.length === 0) {
    html = "<p><em>Chưa có sản phẩm nào trong giỏ hàng!</em></p>";
  } else {
    let total = 0;
    cart.forEach((item, i) => {
      html += `<div>${i + 1}. <strong>${item.name}</strong> - ${item.price.toLocaleString()}đ</div>`;
      text += `${i + 1}. ${item.name} - ${item.price}đ\n`;
      total += item.price;
    });
    html += `<br><strong>Tổng cộng: ${total.toLocaleString()}đ</strong>`;
    text += `\nTổng cộng: ${total}đ`;
  }

  orderDisplay.innerHTML = html;

  function prepareOrderDetails() {
    orderText.value = text;
    return true;
  }
</script>
